@model BMA.Models.Product
@using System.Globalization;
@{
    ViewBag.Title = "ProductDetail";
    Layout = "~/Views/Layout/CustomerLayout.cshtml";
    IEnumerable<BMA.Models.Recipe> pm = ViewBag.ProductMaterial;
}

<section class="border-top">
    <div class="container">
        <div class="page-title mrgb6x mrgt6x clearfix">
            <h4 class="page-name">@Model.ProductName</h4>
            <div class="tag-bar"> <a href="#"><span>your aiming holiday</span></a> </div>
        </div>
    </div>
</section>
<section>
    <div class="container">
        <div class="property-single">
            <div class="col-md-6 no-padding col-sm-8 animated out" data-delay="0" data-animation="fadeInUp">
                <div class="property-single-img">
                    <img src="@Url.Content("~/Content/Images/BakeryImages/" + Model.ProductImage)" class="img-responsive" alt="#" />
                    <div class="image-detail">
                        <h5 class="place-name">@Model.ProductName.ToUpper()</h5>
                        <div class="place-price"><span>@Model.ProductStandardPrice.ToString("C0", CultureInfo.CreateSpecificCulture("vi-VN"))<sup>/cái</sup></span></div>
                    </div>
                </div>
            </div>
            <div class="col-md-6 col-sm-4 animated out" data-delay="0" data-animation="fadeInUp">
                <div class="property-heading property-info">
                    <h4><span>@Model.ProductName.ToUpper()</span></h4>
                    <p style="font-size:14px;">@Model.Descriptions</p>
                    @*<div style="margin-top:153px;" class="booking-btn"> <a href="@Url.Action("AddCart", "Cart", new { @productId = Model.ProductId, @strURL = Request.Url.ToString() })" class="book-it">MUA HÀNG</a> </div>*@
                    <div style="margin-top: 153px;" class="booking-btn">
                        <a style="color:#ffffff" href="javascript:void(0)" onclick="return openPopup('@Model.ProductName','@Model.ProductId','@Model.ProductStandardPrice');" class="sale">MUA HÀNG</a>
                        <script type="text/javascript">
                            var selectDongia = 0;
                            function openPopup(productName, productId, dongia) {
                                selectDongia = dongia;
                                $('#light .totalPriceProduct').text(selectDongia + " Đồng");
                                $("#light .popupProductName").text(productName);
                                $("#light .hiddenProductID").attr('value', productId);
                                $("#light").show();
                                $("#fade").show();

                                return 1;
                            }
                            $('#light .inputProductNum').keyup(function () {
                                var total = $(this).val() * selectDongia;
                                $('#light .totalPriceProduct').text(total + " Đồng");
                            });
                            $('.inputProductNum').keyup(function () {
                                if (this.value != this.value.replace(/[^0-9\.]/g, '')) {
                                    this.value = this.value.replace(/[^0-9\.]/g, '');
                                }
                            });
                        </script>
                    </div>

                </div>
            </div>
        </div>
    </div>
</section>
<section>
    <div class="container">
        <div class="property-details mrgt4x">
            <div class="col-md-6 no-padding col-sm-12">
                <div class="property-features animated out" data-delay="0" data-animation="fadeInUp">
                    <div class="property-heading">
                        <h4><span>NGUYÊN LIỆU</span></h4>
                    </div>
                    <ul class="features-name col-md-4 col-sm-4">
                        @foreach (var item in pm)
                        {
                            <li><i class="fa fa-check"></i><span>@item.ProductMaterial.ProductMaterialName</span></li>
                        }
                    </ul>
                </div>
            </div>
            <div class="col-md-6 col-sm-12">
                <div class="property-description animated out" data-delay="0" data-animation="fadeInUp">
                    <div class="property-heading">
                        <h4><span>GHI CHÚ</span></h4>
                    </div>
                    <p class="note">@Model.Note</p>
                </div>
            </div>
        </div>
        <div id="light" class="white_content">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title" id="popupProductName" style="margin-left: 150px; font-family: 'Patrick Hand SC'">@Model.ProductName</h3>
                </div>
                <div class="modal-body">
                    <form id="addCartForm" action='@Url.Action("AddCart", "Cart", new { @strURL = Request.Url.ToString()})' method="post">
                        <table class="popup-table">
                            <tr>
                                <td>Số lượng: </td>
                                <td><input style="width:220px;" type="text" value="" placeholder="Chỉ nhập số - tối đa 9999" class="inputProductNum" id="inputProductNum" name="inputNumber" min="1" maxlength="4" required /></td>
                            </tr>
                            <tr>
                                <td>Thành tiền: </td>
                                <td class="totalPriceProduct"></td>
                            </tr>
                        </table>
                        <input type="hidden" class="hiddenProductID" name="productID" value="" />
                    </form>
                </div>
                <div class="modal-footer">
                    <div class="popup-btn"> <a href="#" onclick="return submitAddCart();" class="book-it">Đồng ý</a> </div>
                    <script type="text/javascript">
                        function submitAddCart() {
                            document.getElementById("addCartForm").submit();
                            return 1;
                        }
                    </script>
                    <div class="popup-btn" style="margin-right: 30px; background-color: #a92828"><a href="javascript:void(0)" style="background-color: #a92828" onclick="document.getElementById('light').style.display = 'none'; document.getElementById('fade').style.display = 'none'" class="book-it">Hủy bỏ</a> </div>
                </div>
            </div>
        </div>
        <div id="fade" class="black_overlay"></div>
    </div>
</section>
}


